type Message :: struct {
    text: string,
    function read(self) -> string {
        return self.text
    },
    function choose(self, fallback: string) -> string {
        if self.text == "" {
            return fallback
        }
        return self.text
    },
}

function identity[T](value: T) -> T {
    return value
}

type Box[T] :: struct {
    value: T,
    function passthrough(self) -> T {
        return identity(self.value)
    },
}

function main() -> nil {
    message := Message { text: "hello" }
    print(message.choose("fallback"))
    boxed := Box[string] { value: "method generic ok" }
    print(boxed.passthrough())
    return nil
}
