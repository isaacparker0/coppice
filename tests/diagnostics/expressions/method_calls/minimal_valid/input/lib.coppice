type User :: struct {
    id: int64,
    function idValue(self) -> int64 {
        return self.id
    },
    function bump(mut self, delta: int64) -> int64 {
        self = User { id: self.id + delta }
        return self.id
    },
}

type Box[T] :: struct {
    value: T,
    function get(self) -> T {
        return self.value
    },
    function set(mut self, value: T) -> nil {
        self = Box[T] { value: value }
        return nil
    },
}

type Incrementer :: interface {
    function bump(self, delta: int64) -> int64,
}

type Counter implements Incrementer :: struct {
    value: int64,
    function bump(self, delta: int64) -> int64 {
        return self.value + delta
    },
}

function run() -> int64 {
    mut user := User { id: 1 }
    value := user.idValue()
    user.bump(value)

    mut box := Box[int64] { value: user.idValue() }
    box.set(42)

    incrementer: Incrementer := Counter { value: box.get() }
    return incrementer.bump(1)
}
