actions:
    - name: CI
      container_image: "ubuntu-24.04"
      env:
          DOCKER_CONFIG: "/root/.docker"
      triggers:
          push:
              branches:
                  - main
          pull_request:
              branches:
                  - "*"
      steps:
          - run: bazel mod deps --lockfile_mode=error
          - run: bazel run //:gazelle -- -mode=diff
          - run: bazel run //:format -- check
          - run: bazel build //...
          - run: bazel test //...
          - run: bazel run --run_in_cwd @multitool//tools/typos
          - run: bazel run //tools/filename_linter:main
          - run: bazel run //playground/deploy:configure_docr_auth
          - run: |
                bazel run \
                  --stamp \
                  --define=push_deploy=true \
                  --platforms=@toolchains_llvm_bootstrapped//platforms:linux_amd64 \
                  //playground:playground_push
